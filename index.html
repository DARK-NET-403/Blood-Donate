<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ব্লাড ডোনেশন প্ল্যাটফর্ম</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: url('https://c.top4top.io/p_3432i6aa40.jpg') no-repeat center center fixed;
    background-size: cover;
    color: #b71c1c;
    margin: 0;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center; /* এটিই পুরোপুরি vert & horiz মাঝখানে রাখবে */
  }
  .container {
    width: 360px;
    background: #fff;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(183,28,28,0.3);
  }
  h1 {
    text-align: center;
    margin-bottom: 25px;
  }
  button.menu-btn {
    width: 100%;
    margin-bottom: 15px;
    padding: 12px;
    font-size: 1.1rem;
    background: #b71c1c;
    border: none;
    color: white;
    border-radius: 8px;
    cursor: pointer;
  }
  button.menu-btn:hover {
    background: #7f0000;
  }
  form {
    display: none;
    margin-top: 10px;
  }
  form.active {
    display: block;
  }
  label {
    display: block;
    margin-top: 10px;
    font-weight: bold;
  }
  input, select, textarea {
    width: 100%;
    padding: 10px;
    margin-top: 5px;
    border: 2px solid #b71c1c;
    border-radius: 6px;
    font-size: 1rem;
  }
  button.submit-btn {
    margin-top: 20px;
    width: 100%;
    padding: 12px;
    font-size: 1.1rem;
    background: #b71c1c;
    border: none;
    color: white;
    border-radius: 8px;
    cursor: pointer;
  }
  button.submit-btn:hover {
    background: #7f0000;
  }
  #searchResults {
    margin-top: 20px;
    background: #ffe6e6;
    border: 1px solid #b71c1c;
    border-radius: 8px;
    padding: 10px;
    max-height: 250px;
    overflow-y: auto;
  }
  .donor {
    border-bottom: 1px solid #b71c1c;
    padding: 6px 0;
  }
  .donor:last-child {
    border-bottom: none;
  }
  .thank-you {
    text-align: center;
    font-weight: bold;
    font-size: 1.2rem;
    margin-top: 20px;
    color: #2e7d32;
  }
  .developer-credit {
    text-align: center;
    margin-top: 20px;
    font-size: 0.9rem;
    color: #b71c1c;
    font-weight: bold;
  }
</style>
</head>
<body>

<div class="container" role="main" aria-label="ব্লাড ডোনেশন প্ল্যাটফর্ম">

  <h1>ব্লাড ডোনেশন প্ল্যাটফর্ম</h1>

  <button class="menu-btn" data-target="registerForm">ডোনার রেজিস্ট্রেশন</button>
  <button class="menu-btn" data-target="searchForm">ব্লাড খুঁজুন</button>
  <button class="menu-btn" data-target="contactForm">যোগাযোগ</button>

  <form id="registerForm" aria-label="ডোনার রেজিস্ট্রেশন ফর্ম" novalidate>
    <label for="name">পুরো নাম</label>
    <input type="text" id="name" name="name" required placeholder="আপনার পুরো নাম লিখুন" />

    <label for="bloodgroup">রক্তের গ্রুপ</label>
    <select id="bloodgroup" name="bloodgroup" required>
      <option value="" disabled selected>-- রক্তের গ্রুপ নির্বাচন করুন --</option>
      <option value="A+">A+</option><option value="A-">A-</option>
      <option value="B+">B+</option><option value="B-">B-</option>
      <option value="AB+">AB+</option><option value="AB-">AB-</option>
      <option value="O+">O+</option><option value="O-">O-</option>
    </select>

    <label for="address">ঠিকানা</label>
    <textarea id="address" name="address" required placeholder="আপনার ঠিকানা লিখুন"></textarea>

    <label for="phone">মোবাইল নাম্বার</label>
    <input type="tel" id="phone" name="phone" pattern="01[0-9]{9}" required placeholder="01XXXXXXXXX" />

    <button type="submit" class="submit-btn">রেজিস্টার করুন</button>
  </form>

  <form id="searchForm" aria-label="ব্লাড খুঁজুন ফর্ম" novalidate>
    <label for="searchBlood">রক্তের গ্রুপ নির্বাচন করুন</label>
    <select id="searchBlood" name="searchBlood" required>
      <option value="" disabled selected>-- রক্তের গ্রুপ নির্বাচন করুন --</option>
      <option value="A+">A+</option><option value="A-">A-</option>
      <option value="B+">B+</option><option value="B-">B-</option>
      <option value="AB+">AB+</option><option value="AB-">AB-</option>
      <option value="O+">O+</option><option value="O-">O-</option>
    </select>

    <label for="location">জেলা বা এলাকা লিখুন</label>
    <input type="text" id="location" name="location" required placeholder="আপনার এলাকাটি লিখুন" />

    <button type="submit" class="submit-btn">সার্চ করুন</button>
  </form>

  <div id="searchResults" aria-live="polite" aria-atomic="true"></div>

  <form id="contactForm" aria-label="যোগাযোগ ফর্ম" novalidate>
    <label for="contactName">আপনার নাম</label>
    <input type="text" id="contactName" name="contactName" required placeholder="আপনার নাম লিখুন" />

    <label for="contactEmail">ইমেইল</label>
    <input type="email" id="contactEmail" name="contactEmail" required placeholder="আপনার ইমেইল দিন" />

    <label for="contactMessage">মেসেজ</label>
    <textarea id="contactMessage" name="contactMessage" required placeholder="আপনার মেসেজ লিখুন"></textarea>

    <button type="submit" class="submit-btn">পাঠান</button>
  </form>

  <div id="contactThanks" class="thank-you" style="display:none;">আপনার মেসেজ পেয়ে ধন্যবাদ!</div>

  <div class="developer-credit">Developed by Ariyan Rabbi (Dʌʀĸ-Nɘt)</div>

</div>

<script>
  const registerForm = document.getElementById('registerForm');
  const searchForm = document.getElementById('searchForm');
  const contactForm = document.getElementById('contactForm');
  const searchResults = document.getElementById('searchResults');
  const contactThanks = document.getElementById('contactThanks');
  const menuButtons = document.querySelectorAll('.menu-btn');

  let donors = JSON.parse(localStorage.getItem('donors') || '[]');

  function hideAllForms() {
    registerForm.style.display = 'none';
    searchForm.style.display = 'none';
    contactForm.style.display = 'none';
    searchResults.innerHTML = '';
    contactThanks.style.display = 'none';
  }

  menuButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      hideAllForms();
      const target = btn.getAttribute('data-target');
      if (target === 'registerForm') {
        registerForm.style.display = 'block';
      } else if (target === 'searchForm') {
        searchForm.style.display = 'block';
      } else if (target === 'contactForm') {
        contactForm.style.display = 'block';
      }
      searchResults.innerHTML = '';
      contactThanks.style.display = 'none';
    });
  });

  hideAllForms();

  registerForm.addEventListener('submit', e => {
    e.preventDefault();

    const name = registerForm.name.value.trim();
    const bloodgroup = registerForm.bloodgroup.value;
    const address = registerForm.address.value.trim();
    const phone = registerForm.phone.value.trim();

    if (!name || !bloodgroup || !address || !phone) {
      alert('সব তথ্য পূরণ করুন।');
      return;
    }
    if (!/^01[0-9]{9}$/.test(phone)) {
      alert('সঠিক মোবাইল নাম্বার দিন (01XXXXXXXXX)।');
      return;
    }

    const existingIndex = donors.findIndex(d => d.phone === phone);
    if (existingIndex !== -1) {
      if (!confirm('এই ফোন নম্বর দিয়ে আগেই রেজিস্ট্রেশন করা আছে। তথ্য আপডেট করবেন?')) {
        return;
      }
      donors.splice(existingIndex, 1);
    }

    donors.push({name, bloodgroup, address, phone});
    localStorage.setItem('donors', JSON.stringify(donors));

    alert('রেজিস্ট্রেশন সফল হয়েছে। ধন্যবাদ!');

    registerForm.reset();
  });

  searchForm.addEventListener('submit', e => {
    e.preventDefault();
    searchResults.innerHTML = '';

    const bloodgroup = searchForm.searchBlood.value;
    const location = searchForm.location.value.trim().toLowerCase();

    if (!bloodgroup || !location) {
      alert('রক্তের গ্রুপ এবং এলাকা সঠিকভাবে দিন।');
      return;
    }

    const matched = donors.filter(d =>
      d.bloodgroup === bloodgroup && d.address.toLowerCase().includes(location)
    );

    if (matched.length === 0) {
      searchResults.innerHTML = '<p>দুঃখিত, আপনার এলাকার জন্য কোন ডোনার পাওয়া যায়নি।</p>';
      return;
    }

    let html = `<p>আপনার এলাকায় <strong>${matched.length}</strong> জন ডোনার পাওয়া গেছে:</p>`;
    matched.forEach(d => {
      html += `
      <div class="donor">
        <strong>নাম:</strong> ${d.name} <br />
        <strong>রক্তের গ্রুপ:</strong> ${d.bloodgroup} <br />
        <strong>ঠিকানা:</strong> ${d.address} <br />
        <strong>মোবাইল:</strong> ${d.phone}
      </div>
      `;
    });
    searchResults.innerHTML = html;
  });

  contactForm.addEventListener('submit', e => {
    e.preventDefault();

    const contactName = contactForm.contactName.value.trim();
    const contactEmail = contactForm.contactEmail.value.trim();
    const contactMessage = contactForm.contactMessage.value.trim();

    if (!contactName || !contactEmail || !contactMessage) {
      alert('সব তথ্য পূরণ করুন।');
      return;
    }

    contactThanks.style.display = 'block';

    contactForm.reset();
  });
</script>

</body>
</html>
